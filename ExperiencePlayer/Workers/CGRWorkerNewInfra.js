!function(r){define("DS/Formats/Formats",(function(){return new Object})),require(["DS/Formats/CGRFile"],(function(e){r.onmessage=function(n){var a=null,o=!1,t=null,i=!1,s=!1,f=!1,u=!1,l=!1,c=!1,v=void 0,p=!1,d=!1,m=!1,w=null,y=!1;function R(r,n){var R=new Uint8Array(r.target.response),x=new e(new byteArrayReader(R),o,i,u,v,f,p,y,w,d,s,t,l,c),C=x.open(m);if(n&&n.length){for(var F={},G=0;G<n.length;G++)F[n[G]]=x.des(n[G],!0);C||(C={reps:[],resource:[],material:[]}),C.applicativesContainers=F}C&&C.error?b(C.error):null!=C?a(C):b()}function b(r){a({reps:[],resource:[],material:[],error:r||!0})}var x=function(e,a){var o;o=function(r){var e=[],n=null,a=r.reps,o=r.resource,t=r.decorations;t&&e.push(t.buffer);for(var i=0;i<o.length;++i){var s=o[i];s.img&&!s.Lss&&e.push(s.img.buffer)}for(var f=0;f<a.length;++f)if(n=a[f],1&f||8&f)for(i=0;i<n.length;++i)for(var u=n[i].tab,l=0;l<u.length;++l){var c=u[l];e.push(c.vertexPositionArray.buffer),c.vertexNormalArray&&e.push(c.vertexNormalArray.buffer),e.push(c.vertexIndexArray.buffer)}else for(i=0;i<n.length;++i){c=n[i];e.push(c.vertexPositionArray.buffer),c.vertexNormalArray&&e.push(c.vertexNormalArray.buffer),e.push(c.vertexIndexArray.buffer);for(l=0;l<c.drawingGroups.length;++l){var v=c.drawingGroups[l];v.tEi.buffer?e.push(v.tEi.buffer):(e.push(v.tEi.prims.buffer),e.push(v.tEi.bs.buffer))}}return e}(e),r.postMessage({error:e.error,kIn:n.data.kIn,sceneGraph:e.sceneGraph,reps:e.reps,resource:e.resource,material:e.material,sgRep:e.sgRep,decorations:e.decorations,axisSystems:e.axisSystems,curvedPipes:e.curvedPipes,canonicals:e.canonicals,refPlanes:e.refPlanes,$xe:e.$xe,node:a,applicativesContainers:e.applicativesContainers,CGR:!0},o)},C=n.data;y=C.E5e;var F=C.path,G=void 0!==C.inputFile,S=C.k6e,h=C.W6e,P=(s=C.A5e,C.applicativesContainers),g=C.q6e,q=C.H6e;if(p=C.P5e,d=C.B6e,w=C.sagInfo,m=C.uvr,C.GR&&(c=!0),C.j6e&&(l=!0),S&&(o=!0),h&&(i=!0),s&&(s=!0),t=C.optimizeCurvedPipes,q&&(u=!0),g&&(f=!0),v=C.uint32Index,G){var A={target:{response:C.inputFile}};a=function(r){x(r,C.node)},R(A,P)}else!function(r,e,n){a=e;var o=new XMLHttpRequest;if(o.onload=R,o.onerror=b,"posthttp"==r.slice(0,8)){var t=r.indexOf(":postparams:"),i=r.slice(9,t),s=r.slice(t+12,r.length);o.open("POST",i,!1),o.responseType="arraybuffer",o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(s)}else o.open("GET",r,!1),o.responseType="arraybuffer",o.send(null)}(F,(function(r){x(r,C.node)}))},r.postMessage({loaded:!0})}))}(this);